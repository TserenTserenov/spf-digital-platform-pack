---
id: DP.ARCH.001
name: Архитектура платформы
type: domain-entity
status: active
summary: "3-слойная архитектура ИТ-платформы с 4 характеристиками: эволюционируемость, масштабируемость, обучаемость, генеративность"
created: 2026-02-07
updated: 2026-02-11
trust:
  F: 4
  G: domain
  R: 0.8
epistemic_stage: evidence
---

# Архитектура ИТ-платформы

## 1. Назначение

Документ описывает **архитектуру ИТ-платформы** как прозрачный ящик: слоистую структуру, архитектурные характеристики, универсальный паттерн описания компонентов и принципы проектирования.

## 2. Три слоя платформы

```
┌─────────────────────────────────────────────────────────────┐
│  СЛОЙ 3: ИНТЕРФЕЙСЫ (тонкие клиенты)                        │
│  Telegram Bot │ Web LMS │ ChatGPT Apps │ Mobile │ API       │
└───────────────────────────┬─────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────┐
│  СЛОЙ 2: ОБРАБОТКА                                           │
│  ┌─────────────────────────┐  ┌───────────────────────────┐ │
│  │ Зона А: ИИ-системы      │◄►│ Зона Б: Детерминированные │ │
│  │ (LLM, stateless)        │  │ (код, stateful, MCP)      │ │
│  │ Стратег, Проводник,     │  │ Twin, Hub, CRM, LMS,      │ │
│  │ Консультант, KE, …      │  │ Биллинг, ORY, Event Bus,  │ │
│  │ (DP.D.009)              │  │ MCP-серверы, …             │ │
│  └─────────────────────────┘  └───────────────────────────┘ │
└───────────────────────────┬─────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────┐
│  СЛОЙ 1: ДАННЫЕ + ИНФРАСТРУКТУРА                             │
│  GitHub Repos │ PostgreSQL │ SurrealDB │ Embeddings │ Cache  │
└─────────────────────────────────────────────────────────────┘
```

## 3. Описание слоёв

| Слой | Назначение | Характер | Компоненты |
|------|------------|----------|------------|
| **3. Интерфейсы** | Точки входа для пользователей | Тонкие клиенты, без бизнес-логики | Telegram Bot, Web LMS, ChatGPT Apps, Mobile, API |
| **2. Обработка** | Логика, принятие решений, доступ к данным | Две зоны (см. ниже) | ИИ-системы + детерминированные системы |
| **1. Данные** | Персистентность данных | Физическое хранение | GitHub, PostgreSQL, SurrealDB, индексы (embeddings), Cache |

### Зоны слоя обработки

Слой 2 содержит два типа систем, которые работают как **пиры** (горизонтальное взаимодействие):

| Зона | Характер | Состояние | Стоимость | Тестирование | Компоненты |
|------|----------|-----------|-----------|-------------|------------|
| **А: ИИ-системы** | Недетерминированные, LLM | Stateless | Высокая (токены) | Вероятностное | Стратег, Проводник, Консультант, KE и др. |
| **Б: Детерминированные** | Детерминированные, код | Stateful | Низкая | Точное | Twin, Hub, CRM, LMS, Биллинг, ORY, Event Bus, MCP-серверы |

**Правила взаимодействия:**
- Интерфейс (слой 3) обращается к обработке (слой 2) — к любой зоне
- Зоны А и Б взаимодействуют горизонтально (ИИ вызывает MCP, MCP возвращает данные)
- Обработка (слой 2) обращается к данным (слой 1)
- Интерфейс **не** обращается к данным напрямую
- ИИ-система **не** знает, какой UI у пользователя

## 4. Архитектурные характеристики

> Характеристика ≠ Принцип (DP.D.010). Характеристика — измеряемое качество. Принцип — правило для достижения характеристики.

### 4.1. Эволюционируемость (active)

**Определение:** Способность платформы принимать новые сервисы, базы данных и MCP-серверы без изменения существующей структуры.

**Как архитектура обеспечивает:**
- MCP-протокол стандартизирует интерфейс доступа к данным → новый источник = новый MCP, без изменения ИИ-систем
- MCP Registry (yaml) — реестр доступных сервисов → добавление = строка в конфиге
- Event Bus — слабая связанность через события → новый потребитель не меняет продюсера
- ИИ-система = репо с config.yaml → новая система = новый репо, подключение = строка в реестре

**Индикатор:** Количество шагов для добавления нового MCP-сервера. Целевое: ≤3 (создать MCP, зарегистрировать, указать в config.yaml ИИ-системы).

### 4.2. Масштабируемость (active)

**Определение:** Способность платформы обслуживать растущее число пользователей без изменения архитектуры.

**Как архитектура обеспечивает:**
- ИИ-системы (слой 2, зона А) — stateless → горизонтальное масштабирование
- Интерфейсы (слой 3) — тонкие клиенты → не хранят состояние
- User-space изолирован → данные одного пользователя не влияют на другого
- MCP per-user → персональные данные разграничены на уровне протокола

**Индикатор:** Требует ли подключение нового пользователя изменений в архитектуре. Целевое: нет.

### 4.3. Обучаемость (active)

**Определение:** Способность платформы улучшать свои решения на основе накопленных данных и обратной связи.

**Как архитектура обеспечивает:**
- Capture-to-Pack фиксирует знания из каждой сессии → Pack обогащается → ИИ-системы получают лучший контекст
- Знание-Экстрактор повышает точность классификации на основе ревью (feedback loop)
- MCP-протокол позволяет подключать аналитику без изменения ИИ-систем
- Memory хранит операционный контекст → каждая следующая сессия эффективнее предыдущей

**Примеры проявлений (по фазам):**
- **Сейчас:** Capture-to-pack обогащает Pack → лучшие инструкции → лучшие результаты
- **Ближайшее:** ИИ-системы адаптируют промпты на основе данных о результативности
- **Будущее:** Рекомендательная система улучшает маршруты на основе паттернов успешных пользователей

**Индикатор:** Улучшается ли качество решений платформы со временем без ручного вмешательства? Целевое: да.

### 4.4. Генеративность (active)

**Определение:** Способность платформы порождать новых созидателей — пользователей, которые на основе общих знаний и шаблонов платформы разворачивают собственные системы и создают собственные знания.

**Как архитектура обеспечивает:**
- **Общее знание** (Platform-space): Pack, SPF, FPF — структурированные знания, доступные всем пользователям
- **Шаблоны развёртывания**: Template-репо экзокортекса → fork & deploy → работающая система за один сеанс
- **Правила наследования**: пользователь строит User-space поверх Platform-space, не с нуля
- **Feedback loop**: captures пользователей обогащают общее знание → следующий пользователь стартует с лучшей базы

**Механизм:**

```
Platform-space (Pack, шаблоны, правила)
        │
        ▼ fork & configure
User-space (персональный экзокортекс, данные, captures)
        │
        ▼ capture-to-pack (feedback)
Platform-space (обогащённое знание)
```

**Индикатор:** Может ли новый пользователь развернуть работающую систему (экзокортекс) из шаблона платформы за один сеанс? Целевое: да.

## 5. Универсальный паттерн: Вход-Обработка-Выход (IPO)

Каждый компонент платформы (ИИ-система, сервис, MCP) описывается единым паттерном:

```
┌──────────┐     ┌──────────────┐     ┌──────────┐
│  ВХОДЫ   │ ──▶ │  ОБРАБОТКА   │ ──▶ │  ВЫХОДЫ  │
│ (Inputs) │     │ (Processing) │     │ (Outputs)│
└──────────┘     └──────────────┘     └──────────┘
```

| Элемент | Что описывает | Пример (Стратег) |
|---------|--------------|-----------------|
| **Входы** | Данные, триггеры, внешние источники | Коммиты из git, планы из DS-strategy, cron 7:00 |
| **Обработка** | Логика, алгоритмы, LLM-промпты | Агрегация РП, генерация плана дня |
| **Выходы** | Артефакты, команды, события | DayPlan.md, WeekPlan.md, PLAN.DayCreated |

**Правило:** Любой паспорт ИИ-системы, описание сервиса или MCP-сервера ДОЛЖЕН содержать IPO-секции.

## 6. Принцип отчуждаемости

> Platform-space ≠ User-space (DP.D.011)

**Определение:** Каждый компонент платформы строится для передачи другим людям.

| Аспект | Platform-space | User-space |
|--------|---------------|------------|
| **Что** | Модули, шаблоны, правила, ИИ-системы | РП, репо, captures, предпочтения |
| **Кто обновляет** | Разработчики платформы | Пользователь + его ИИ-системы |
| **Переносимость** | Одинаково для всех | Уникально для каждого |

**Правило:** Если компонент содержит hardcoded данные конкретного пользователя — это нарушение отчуждаемости. Персонализация — через конфигурацию (user-space), не через код (platform-space).

## 7. Архитектурные принципы

| # | Принцип | Описание | Обеспечивает характеристику |
|---|---------|----------|----------------------------|
| 1 | **Модульность** | Каждый компонент — чётко определённый круг задач | Эволюционируемость |
| 2 | **Слабая связанность** | Взаимодействие через API, MCP и события | Эволюционируемость |
| 3 | **Event-driven** | Loose coupling через Event Bus | Эволюционируемость, Масштабируемость |
| 4 | **IPO-единообразие** | Все компоненты описываются через Вход-Обработка-Выход | Эволюционируемость |
| 5 | **Evolvability-first** | При выборе между простотой сейчас и расширяемостью потом — выбираем расширяемость | Эволюционируемость |
| 6 | **Отчуждаемость** | Всё строится для передачи: platform-space vs user-space | Масштабируемость, Генеративность |
| 7 | **Реестр, не hardcode** | Все MCP, ИИ-системы описаны в реестрах (yaml) | Эволюционируемость |
| 8 | **Персональные данные изолированы** | Доступ к user-space только по делегации | Масштабируемость |
| 9 | **Общее знание → шаблон → fork** | Платформенное знание структурировано для наследования пользователями | Генеративность |

## 8. Ключевые механизмы

### 8.1. Цифровой двойник

**Назначение:** Единое хранилище состояния человека (слой 2, зона Б, MCP).

| Тип | Префикс | Описание |
|-----|---------|----------|
| События | E.* | Все действия (обучение, задания, активность) |
| Слоты | SLT.* | Время, выделенное на развитие |
| Рабочие продукты | W.* | Артефакты (конспекты, модели) |
| Маршруты | ROUTE.* | Планы и шаги развития |
| Ступени | STAGE.* | Текущий уровень |
| Метрики | MET.* | Агрегированные показатели |

### 8.2. Экзокортекс-интерфейс пользователя

**Назначение:** Точка подключения пользователя к платформе (см. [DP.EXOCORTEX.001](DP.EXOCORTEX.001-modular-exocortex.md)).

Модульный CLAUDE.md + Memory — конфигурация взаимодействия пользователя с ИИ-системами. Platform-space (общие модули) + user-space (персональный контекст).

### 8.3. Токены за активность

```
LMS/Клуб → Activity Hub → Proof-of-Impact → Token Economy
(события)   (сбор)        (ML-оценка)       (начисление)
```

### 8.4. MCP Registry

Три категории MCP-серверов:

| Категория | Характер | Примеры | Доступ |
|-----------|----------|---------|--------|
| **Базы знаний** | Read-only | guides-mcp, pack-MCP | Все пользователи |
| **Персональные данные** | Read/Write per user | DS-twin, user-repos | Только владелец + делегированные |
| **Сервисы** | Read/Write | fsm-mcp, linear, github | По авторизации |

## 9. Связанные документы

- [DP.CONCEPT.001 Концепция платформы](DP.CONCEPT.001-platform-concept.md)
- [DP.AGENT.001 ИИ-системы платформы](DP.AGENT.001-ai-agents.md)
- [DP.SYS.001 Детерминированные системы](DP.SYS.001-deterministic-systems.md)
- [DP.EXOCORTEX.001 Модульный экзокортекс](DP.EXOCORTEX.001-modular-exocortex.md)
- [DP.NAV.001 Навигация знаний](DP.NAV.001-knowledge-navigation.md)
- [DP.AISYS.013 Знание-Экстрактор](DP.AISYS.013-knowledge-extractor.md)
