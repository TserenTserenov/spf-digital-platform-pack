---
id: DP.AISYS.013
name: Знание-Экстрактор
type: ai-system-passport
status: draft
summary: "Prompt-based ИИ-система экстракции знаний из сессий в Pack-совместимые сущности"
created: 2026-02-10
trust:
  F: 3
  G: domain
  R: 0.5
epistemic_stage: emerging
orientation: system
initiative: both
interface: both
---

# Знание-Экстрактор (Knowledge Extractor)

## 1. Определение

**Знание-Экстрактор** — ИИ-система, которая трансформирует информацию (гайды, посты, заметки сессий, переписки) в формализованные Pack-совместимые материалы и размещает их в нужных репозиториях.

> Знание ≠ Информация (DP.D.012). Экстрактор превращает информацию в знание.

## 2. Классификация

| Характеристика | Значение | Пояснение |
|----------------|----------|-----------|
| **Ориентация** | system | Работает с репозиториями, а не напрямую с человеком |
| **Инициатива** | both | Вызывается по команде (session-capture) или по расписанию (audit) |
| **Интерфейс** | both | Через API (программно) и через диалог (в сессии Claude Code) |

## 3. IPO-паттерн

### 3.1. Входы (Inputs)

| Вход | Источник | Тип |
|------|----------|-----|
| Сырая информация | Заметки сессии, гайды, посты, переписки | Текст |
| Манифесты Pack'ов | `00-pack-manifest.md` каждого Pack-репо | Структура |
| Правила экстракции | CLAUDE.md репозиториев, bounded contexts | Конфигурация |
| Список репо пользователя | MCP Registry + user-repos | Конфигурация |

### 3.2. Обработка (Processing)

1. **Классификация** — определение типа знания:
   - Доменное знание → Pack
   - Правило для всех репо → корневой CLAUDE.md
   - Правило для одного репо → CLAUDE.md конкретного репо
   - Метод / failure mode → соответствующий раздел Pack
   - Различение → 01B-distinctions.md

2. **Маршрутизация** — определение целевого репозитория и директории:
   - Проверка bounded context каждого Pack'а
   - Выбор наиболее подходящего Pack'а по scope
   - Определение директории внутри Pack'а (02-domain-entities, 03-methods, ...)

3. **Формализация** — трансформация в Pack-совместимый формат:
   - Добавление frontmatter (id, type, status, trust)
   - Структурирование по шаблону SPF (method card, WP card, FM card, ...)
   - Проверка на дидактику (SPF ban: no "step", "lesson")
   - Проверка различений (не путает ли метод с инструментом и т.д.)

4. **Валидация** — проверка перед предложением:
   - Соответствие bounded context
   - Отсутствие дубликатов (проверка по id и содержанию)
   - Process lint (из SPF)

### 3.3. Выходы (Outputs)

| Выход | Формат | Получатель |
|-------|--------|------------|
| Отчёт экстракции | Список кандидатов с классификацией ([DP.WP.001](../04-work-products/DP.WP.001-extraction-report.md)) | Человек (на ревью) |
| Pack-совместимые сущности | Markdown-файлы с frontmatter | Pack-репозитории (после одобрения) |
| Commit proposals | Diffs для человеческого ревью | Git (после одобрения) |

## 4. Сценарии

### 4.1. Session-Capture (в реальном времени)

**Триггер:** Естественный рубеж в рабочей сессии (завершена подзадача, обнаружен паттерн, принято решение).

**Поток:**
```
Рубеж в сессии → Экстрактор проверяет → Анонс «Capture: X → Y» → Одобрение → Запись
```

**Примитивная реализация:** Текущий скилл capture-to-pack в CLAUDE.md. Экстрактор формализует этот паттерн как ИИ-систему.

### 4.2. Bulk-Extraction (пакетная обработка)

**Триггер:** Пользователь загрузил документ, гайд, пост для обработки.

**Поток:**
```
Документ → Экстрактор анализирует → Отчёт с кандидатами → Ревью → Размещение
```

### 4.3. Cross-Repo-Sync (синхронизация между репо)

**Триггер:** Изменение в Pack → проверка, нужно ли обновить downstream.

**Поток:**
```
Изменение в Pack → Экстрактор проверяет downstream → Список предложений → Ревью
```

### 4.4. Knowledge-Audit (аудит знаний)

**Триггер:** По расписанию (monthly) или по запросу.

**Поток:**
```
Обход всех Pack → Проверка полноты, устаревших записей, битых ссылок → Отчёт
```

## 5. Переносимость (отчуждаемость)

> Platform-space ≠ User-space (DP.D.011)

**Platform-space (одинаково для всех):**
- Логика классификации (типы знаний → типы файлов)
- Логика маршрутизации (bounded context → целевой репо)
- Логика формализации (шаблоны SPF)
- Логика валидации (process lint)

**User-space (уникально для пользователя):**
- Список подключённых репозиториев
- Дополнительные правила в CLAUDE.md репо
- Персональные Pack-манифесты
- Пороги чувствительности (как часто предлагать capture)

**Как пользователь подключается:**
1. Указывает свои репо (через GitHub OAuth или конфиг)
2. Экстрактор читает манифесты и CLAUDE.md каждого репо
3. Формирует карту маршрутизации: какое знание куда
4. Работает по общей логике + персональным правилам

## 6. Один или несколько?

**Ответ: ОДНА ИИ-система с несколькими сценариями** (по аналогии со Стратегом, который имеет 8+ сценариев).

**Обоснование:**
- Все сценарии используют одну и ту же тройку: классификация → маршрутизация → формализация
- Различаются только триггеры (реальное время vs пакетный vs по расписанию) и масштаб (один инсайт vs документ vs весь Pack)
- Один config.yaml, один набор промптов, один набор MCP

## 7. Инструменты (MCP, слой 2)

| MCP | Назначение |
|-----|------------|
| pack-MCP (per pack) | Чтение структуры Pack'а, манифестов, bounded contexts |
| user-repos MCP | Чтение/запись файлов в репо пользователя |
| guides-mcp | Нормативные материалы для проверки |
| knowledge-mcp | Индексный поиск по всем БЗ |

## 8. Метрики

| Метрика | Целевое значение |
|---------|-----------------|
| classification_accuracy | >80% (кандидаты правильно классифицированы) |
| routing_accuracy | >90% (попадание в правильный репо/директорию) |
| human_acceptance_rate | >70% (одобренных предложений) |
| false_positive_rate | <20% (ненужных предложений) |

## 9. Реализация (Downstream)

| Репо | Статус | Описание |
|------|--------|----------|
| [DS-extractor](https://github.com/TserenTserenov/DS-extractor) | MVP | Prompt-based реализация: 3 промпта (session-close, on-demand, bulk-extraction), PROCESSES.md с 5 процессами |

**Архитектура реализации:** Без кода — целиком на промптах Claude Code. Запуск: через Protocol Close (автоматически) или по команде пользователя.

**MVP-покрытие сценариев:**
- Session-Capture (§ 4.1) → `prompts/session-close.md`
- Bulk-Extraction (§ 4.2) → `prompts/bulk-extraction.md`
- On-Demand → `prompts/on-demand.md`
- Cross-Repo-Sync (§ 4.3) → planned
- Knowledge-Audit (§ 4.4) → planned

## 10. Связанные документы

- [DP.ARCH.001 Архитектура](DP.ARCH.001-platform-architecture.md) — слой 3, IPO-паттерн
- [DP.AGENT.001 ИИ-системы](DP.AGENT.001-ai-agents.md) — реестр, паспорт
- [DP.EXOCORTEX.001 Модульный экзокортекс](DP.EXOCORTEX.001-modular-exocortex.md) — capture-to-pack как примитив
- [DP.M.001 Метод экстракции знаний](../03-methods/DP.M.001-knowledge-extraction.md)
- [DP.WP.001 Отчёт экстракции](../04-work-products/DP.WP.001-extraction-report.md)
- [DP.NAV.001 Навигация знаний](DP.NAV.001-knowledge-navigation.md)
