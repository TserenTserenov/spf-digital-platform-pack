---
id: DP.EXOCORTEX.001
type: domain-entity
status: draft
created: 2026-02-10
updated: 2026-02-10
trust:
  F: 3
  G: domain
  R: 0.5
epistemic_stage: emerging
---

# Модульный экзокортекс

## 1. Определение

**Модульный экзокортекс** — точка подключения пользователя к платформе: конфигурация его взаимодействия с ИИ-системами через модульный CLAUDE.md и структурированную Memory.

> Platform-space ≠ User-space (D.DTP.011). Экзокортекс состоит из общих модулей (platform-space) и персональных данных (user-space).

## 2. Проблемы, которые решает

| # | Проблема | Как решает |
|---|---------|------------|
| 1 | Перегрузка CLAUDE.md (~800 строк) → Claude пропускает правила | Модульность: CLAUDE.md ≤300 строк, справочники в memory/*.md |
| 2 | Смешаны владельцы протоколов (Claude Code vs Стратег) | Каждый протокол помечен владельцем (session / launchd / manual) |
| 3 | MEMORY.md — дамп всего (лимит 200 строк, обрезается) | Memory ≤100 строк: только оперативный контекст + ссылки |
| 4 | Нет разделения «всегда помни» vs «прочитай когда нужно» | 2-слойная архитектура: auto-load (Слой 1+2) vs on-demand (Слой 3) |
| 5 | memory/*.md не версионируется | Backup → my-strategy/exocortex/ (on Close + Day-Close) |
| 6 | Нет описания межсистемных взаимодействий | PROCESSES.md с ВДВ-паттерном |

## 3. Двухуровневая архитектура инструкций

```
┌─────────────────────────────────────────────────────┐
│  АВТО-ЗАГРУЗКА (всегда в контексте)                  │
│                                                      │
│  Слой 1: MEMORY.md (≤100 строк)                     │
│  Блокирующие правила + РП недели + навигация         │
│                                                      │
│  Слой 2: CLAUDE.md (≤300 строк)                     │
│  Архитектура + стадии сессии + процессы + навигация  │
└──────────────────────────┬──────────────────────────┘
                           ▼
┌─────────────────────────────────────────────────────┐
│  ПО НЕОБХОДИМОСТИ (по ссылкам из Слоя 1 и 2)       │
│                                                      │
│  Слой 3: memory/*.md (≤10 файлов, ≤100 строк каждый)│
│  Кросс-системные справочники: различения, FPF,      │
│  правила по типам, чеклисты, уроки                   │
│                                                      │
│  Системно-специфичное: → <repo>/CLAUDE.md            │
│  Backup: → my-strategy/exocortex/                    │
└─────────────────────────────────────────────────────┘
```

### 3.1. Слой 1: MEMORY.md (оперативная память)

> Оперативная память ≠ Справочник (D.DTP.014). Memory = рабочий стол, не библиотека.

**Принцип:** Если Claude видит только MEMORY.md и ничего больше — он ДОЛЖЕН знать: (1) как открыть сессию, (2) что делать во время работы, (3) как закрыть.

**Структура:**

```markdown
# Оперативная память

## БЛОКИРУЮЩИЕ (проверяй ВСЕГДА)
1. WP Gate: Есть ли РП? → Нет = СТОП
2. Close: push ≠ закрытие → capture + подтверждение + backup

## ВАЖНЫЕ (проверяй на рубежах)
3. Capture: На рубеже → «Capture: X → Y»
4. Отчёты: ВСЕ репо в ~/Github/
5. Процессы: Нельзя реализовывать без PROCESSES.md

## РП текущей недели (W{N})
[таблица — обновляется weekly и on-close]

## Навигация (Слой 3)
[таблица ссылок на memory/*.md и repo/CLAUDE.md]
```

**Правила обновления:**

| Блок | Триггер обновления | Кто обновляет |
|------|-------------------|--------------|
| БЛОКИРУЮЩИЕ | Никогда (стабильные) | Разработчик платформы |
| ВАЖНЫЕ | Никогда (стабильные) | Разработчик платформы |
| РП недели | Weekly (strategy-session) + on-close | Стратег + Claude Code |
| Навигация | При добавлении нового файла memory/*.md | Claude Code |

### 3.2. Слой 2: CLAUDE.md (правила работы)

**CLAUDE.md** (загружается автоматически, ≤300 строк):
- Архитектура репозиториев (типы, ключевое правило, fallback chain)
- Стадии сессии: Open (WP Gate + Ритуал), Work (Capture-to-Pack), Close
- Процессы (различение, размещение PROCESSES.md, ступенчатое правило)
- Memory (навигация по Слою 3, политика)

### 3.3. Слой 3: memory/*.md (кросс-системные справочники)

**Политика:**
- ≤10 файлов, ≤100 строк каждый
- Только кросс-системное (нужно в любой сессии независимо от репо)
- Системно-специфичное → `<repo>/CLAUDE.md`
- Backup → `my-strategy/exocortex/` (on Close + Day-Close)

**Тест размещения:** Нужно ли это Claude в сессии по ДРУГОМУ репо?
- Да → memory/
- Нет → repo/CLAUDE.md

| Файл | Что содержит |
|------|-------------|
| `hard-distinctions.md` | Жёсткие различения (11 пар) |
| `fpf-reference.md` | Навигация по FPF, терминология, принципы |
| `repo-type-rules.md` | Правила Pack/Downstream/Framework/Format |
| `checklists.md` | Чеклисты перед ответом/изменением/созданием |
| `wp-gate-lesson.md` | Урок о WP Gate (мета-знание) |
| `claude-md-maintenance.md` | Обслуживание CLAUDE.md |

## 4. Владельцы протоколов

| Протокол | Владелец | Где описан |
|----------|----------|-----------|
| Open (WP Gate + Ритуал) | **Claude Code** (сессия) | CLAUDE.md |
| Work (Capture-to-Pack) | **Claude Code** (сессия) | CLAUDE.md |
| Close | **Claude Code** (сессия) | CLAUDE.md |
| Day-Close | **Стратег** (launchd) | Pack (DP.AGENT.012) |
| Strategy-Cascade | **Стратег** (launchd) | Pack (DP.AGENT.012) |
| Обновление Memory | **Claude Code** (Close) + **Стратег** (weekly) | CLAUDE.md + Pack |
| Backup экзокортекса | **Claude Code** (Close) + **Стратег** (Day-Close) | CLAUDE.md + Pack |

**Правило:** Протоколы Стратега (Day-Close, Strategy-Cascade) НЕ описываются в CLAUDE.md. Их место — паспорт Стратега в Pack или README.md strategist-agent.

> **Протокол ≠ Skill (Anthropic).** Наши «протоколы» — поведенческие инструкции для ИИ-системы. Anthropic Skills — техническая фича Claude Code (slash-команды). Протокол может быть реализован через Skill (downstream), но протокол — это знание о поведении, а slash-command — инструмент.

## 5. Процессы и сценарии

### 5.1. Различение

| Термин | Определение |
|--------|-------------|
| **Процесс** | Поток действий с ВДВ (Вход → Действие → Выход) |
| **Сценарий** | Межсистемный процесс (синоним). Владелец меняется на границе систем |
| **Данные** | Входы и выходы процесса |
| **ВДВ** | Вход → Действие → Выход (паттерн описания процесса) |

> Тест: передаётся ли управление другой системе? Да → сценарий. Нет → внутренний процесс.

### 5.2. Размещение

| Категория | Где | Пример |
|-----------|-----|--------|
| Пользовательские сценарии | `ecosystem-development/PROCESSES.md` | Рабочая сессия Claude Code |
| Платформенные сценарии | `ecosystem-development/PROCESSES.md` | Day-Close, Strategy-Cascade |
| Внутренние процессы | `<repo>/PROCESSES.md` | Day-Plan (Стратег), FSM routing (бот) |

### 5.3. Ступенчатое правило

| Масштаб изменения | Требуется ли описанный процесс |
|-------------------|-------------------------------|
| Баг-фикс, ≤15 мин | Нет |
| Изменение внутри одной системы | PROCESSES.md этого репо |
| Межсистемная фича | ecosystem-development/PROCESSES.md |
| Новая система | Сценарий + все процессы + данные (ВДВ) |

### 5.4. Формат описания (шаблон)

```markdown
### Процесс: [Название]
> Тип: пользовательский сценарий | платформенный сценарий | внутренний процесс
> Владелец: [система]
> Участники: [системы]

**Вход:** [данные]
**Действие:** [шаги]
**Выход:** [данные]
```

## 6. Модульность CLAUDE.md

CLAUDE.md состоит из **модулей**. Каждый модуль:

```markdown
## Модуль: [Название]
> Владелец: session | launchd | manual
> Статус: active | optional | disabled

[Содержимое модуля]
```

**Базовые модули (всегда включены):**
- Архитектура репозиториев (классификация, fallback chain)
- WP Gate (блокирующее правило)
- Стадии сессии (Open/Work/Close)
- Процессы (различение, ступенчатое правило)
- Memory (навигация, политика)

**Опциональные модули (включаются пользователем):**
- Стратег-интеграция (команды /rp, /report)
- Capture-to-Pack (расширенный)
- Навигация знаний (кросс-репо ссылки)

## 7. ВДВ-паттерн экзокортекса

| Элемент | Описание |
|---------|----------|
| **Вход** | Репо пользователя, предпочтения, выбранные модули |
| **Действие** | Инстанциация шаблонов (CLAUDE.md + Memory), подключение модулей |
| **Выход** | Настроенные CLAUDE.md + MEMORY.md + memory/*.md |

## 8. Отчуждаемость экзокортекса

| Компонент | Platform-space | User-space |
|-----------|---------------|------------|
| CLAUDE.md | Модули, правила, протоколы | Выбор включённых модулей |
| MEMORY.md | Структура, блоки, триггеры | Содержимое (РП, ссылки) |
| memory/*.md | Шаблоны файлов | Содержимое файлов |

**Принцип:** Шаблон одинаков для всех пользователей. Содержимое уникально.

## 9. Глоссарий компонентов экзокортекса

| Компонент | Что это | Когда загружается | Назначение |
|-----------|---------|-------------------|------------|
| **MEMORY.md** | Оперативная память | Всегда (системный промпт) | РП, блокирующие правила, навигация |
| **Корневой CLAUDE.md** | Правила для ВСЕХ репо | Всегда | Архитектура, стадии сессии, процессы |
| **Репо CLAUDE.md** | Правила для ОДНОГО репо | В этом репо | Типо-специфика, терминология |
| **memory/*.md** | Кросс-системные справочники | По ссылкам | Различения, FPF, правила типов, уроки |
| **PROCESSES.md** | Описание процессов и сценариев | По необходимости | ВДВ-описания взаимодействий |

**Ключевые различения:**
- **Протокол ≠ Anthropic Skill**: Протокол = знание о поведении. Skill = техническая фича (slash-command).
- **MEMORY.md ≠ CLAUDE.md**: Memory = что меняется (РП, статусы). CLAUDE.md = что стабильно (правила, протоколы).
- **ИИ-система ≠ Протокол**: ИИ-система = компонент (Стратег). Протокол = поведение внутри сессии.
- **Корневой CLAUDE.md ≠ Репо CLAUDE.md**: Корневой = для всех репо. Репо = для одного.
- **Процесс ≠ Сценарий**: Процесс = внутрисистемный. Сценарий = межсистемный (синоним).

## 10. Связанные документы

- [DP.ARCH.001 Архитектура](DP.ARCH.001-platform-architecture.md) — отчуждаемость как принцип
- [DP.AGENT.001 ИИ-системы](DP.AGENT.001-ai-agents.md) — Claude Code и Стратег как владельцы протоколов
- [DP.NAV.001 Навигация знаний](DP.NAV.001-knowledge-navigation.md) — Memory содержит ссылки (уровень 4 навигации)
- [DP.AISYS.013 Знание-Экстрактор](DP.AISYS.013-knowledge-extractor.md) — capture-to-pack как примитив экстрактора
