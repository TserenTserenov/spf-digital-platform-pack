---
id: AGT.012.SC.06
type: scenario
trigger: on-demand
status: draft
created: 2026-02-07
---

# Check Plan

## Назначение

Сверка входящей задачи с текущим планом. Вызывается автоматически при получении задачи или по запросу.

## Триггер

- **Тип:** По запросу / Автоматически при задаче
- **Команда:** `/check-plan [задача]`
- **Когда:** При получении новой задачи

## Входы

| Источник | Данные | Обязательность |
|----------|--------|----------------|
| Задача | Описание задачи от пользователя | Обязательно |
| `current/daily/YYYY-MM-DD.md` | План дня | Если есть |
| `current/weekly-plan.md` | План недели | Обязательно |
| `current/monthly-priorities.md` | Месячные приоритеты | Обязательно |

## Алгоритм

### Шаг 1: Анализ задачи

1. Парсинг задачи: что нужно сделать?
2. Оценка бюджета времени
3. Определение области/репозитория

### Шаг 2: Сверка с планом

1. Есть ли эта задача в плане дня?
2. Есть ли в недельном плане?
3. Соответствует ли месячным приоритетам?

### Шаг 3: Классификация

| Категория | Описание |
|-----------|----------|
| `in-plan` | Задача уже в плане |
| `aligned` | Соответствует приоритетам, можно добавить |
| `unplanned` | Не соответствует текущим приоритетам |
| `urgent` | Срочно, нужно решить сейчас |

### Шаг 4: Рекомендация

В зависимости от категории:
- `in-plan` → Показать где в плане, предложить начать
- `aligned` → Предложить добавить в план
- `unplanned` → Предупредить о смене фокуса
- `urgent` → Предложить обновить приоритеты

## Выходы

| Артефакт | Путь | Описание |
|----------|------|----------|
| Рекомендация | — | Вывод в чат |
| Обновлённый план | При подтверждении | Если нужно добавить |

## Формат вывода

### Вариант: in-plan

```markdown
## Сверка с планом

**Задача:** [описание]

**Статус:** В плане

Эта задача уже есть в плане:
- **День:** РП-2 "..." (бюджет: 2h)
- **Неделя:** Приоритет P2

**Рекомендация:** Можно приступать.

Начать работу над РП-2?
```

### Вариант: aligned

```markdown
## Сверка с планом

**Задача:** [описание]

**Статус:** Соответствует приоритетам

Эта задача НЕ в текущем плане, но соответствует:
- **Месячный приоритет:** "..."
- **Оценка бюджета:** ~Xh

**Рекомендация:** Добавить в план недели.

Добавить как новый РП?
```

### Вариант: unplanned

```markdown
## Сверка с планом

**Задача:** [описание]

**Статус:** Не в приоритетах

Эта задача НЕ соответствует текущим приоритетам:

**Текущие приоритеты:**
1. Приоритет 1
2. Приоритет 2

**Внимание:** Выполнение этой задачи отвлечёт от плана.

**Варианты:**
1. Отложить задачу
2. Добавить в план и пересмотреть приоритеты
3. Выполнить как срочную (urgent)

Как поступить?
```

### Вариант: urgent

```markdown
## Сверка с планом

**Задача:** [описание]

**Статус:** Срочная

Эта задача требует немедленного внимания.

**Влияние на план:**
- Сегодня запланировано: X РП
- Бюджет оставшийся: Yh
- Задача займёт: ~Zh

**Рекомендация:** Выполнить сейчас, скорректировать план дня.

Приступить и обновить план?
```

## Метрики успеха

| Метрика | Целевое |
|---------|---------|
| Задача классифицирована | Да |
| Рекомендация дана | Да |
| Пользователь принял решение | Да |

## Ошибки и fallback

| Ошибка | Действие |
|--------|----------|
| Нет плана | Классифицировать как unplanned |
| Неясная задача | Уточнить у пользователя |

## Связанные сценарии

- **При добавлении:** [04-add-workproduct](04-add-workproduct.md)
- **При изменении:** [03-update-priorities](03-update-priorities.md)
