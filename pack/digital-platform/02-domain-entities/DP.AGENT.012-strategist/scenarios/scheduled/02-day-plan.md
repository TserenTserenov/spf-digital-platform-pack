---
id: AGT.012.SC.02
type: scenario
trigger: scheduled
schedule: "7:00 daily"
status: draft
created: 2026-02-07
---

# Day Plan

## Назначение

Ежедневное планирование с апдейтом о вчерашнем дне. Запускается автоматически в 7:00.

## Триггер

- **Время:** 7:00 по местному времени
- **День:** Ежедневно (Вт-Вс; в Пн после strategy-session)
- **Тип:** Автоматический (cron/launchd)

## Входы

| Источник | Данные | Обязательность |
|----------|--------|----------------|
| `current/weekly-plan.md` | План недели | Обязательно |
| `current/daily/YYYY-MM-DD.md` | План вчера | Если есть |
| Git log | Коммиты за вчера | Обязательно |
| Git log | Коммиты за неделю | Для контекста |

## Алгоритм

### Шаг 1: Апдейт о вчера

1. Загрузить план вчера (если есть)
2. **КРИТИЧЕСКИ ВАЖНО:** Загрузить коммиты за вчера из **ВСЕХ** репозиториев в `~/Github/`
3. Сопоставить запланированные РП и фактические коммиты
4. Рассчитать статистику

**Команда для сбора коммитов из всех репо:**
```bash
for repo in $(ls ~/Github/); do
  if [ -d ~/Github/$repo/.git ]; then
    commits=$(cd ~/Github/$repo && git log --oneline --since="yesterday 00:00" --until="today 00:00" 2>/dev/null | wc -l)
    if [ "$commits" -gt 0 ]; then
      echo "=== $repo ($commits) ==="
      cd ~/Github/$repo && git log --oneline --since="yesterday 00:00" --until="today 00:00"
    fi
  fi
done
```

**ЗАПРЕЩЕНО:** Проверять только репозитории из текущей сессии. Пользователь работает в нескольких сессиях параллельно.

```
Статистика вчера:
- Запланировано: X РП
- Сделано: Y РП
- Коммитов: Z
- Время (оценка): W часов
```

### Шаг 2: Контекст недели

1. Загрузить недельный план
2. Рассчитать прогресс по неделе
3. Определить оставшиеся РП

```
Прогресс недели:
- День: N из 7
- РП завершено: X из Y
- Бюджет: Zh израсходовано / Wh осталось
```

### Шаг 3: Формирование плана дня

1. Выбрать РП из недельного плана (приоритет: in-progress, затем pending)
2. Учесть carry-over со вчера
3. Ограничить по дневному бюджету (обычно 4-6h)
4. Предложить 2-4 РП на день

### Шаг 4: Рекомендация с чего начать

На основе:
- Приоритетов РП
- Энергии утра (сложное первым)
- Зависимостей между РП

## Выходы

| Артефакт | Путь | Описание |
|----------|------|----------|
| План дня | `current/daily/YYYY-MM-DD.md` | План на сегодня |
| Коммит | — | Фиксация плана |

## Формат вывода

```markdown
## [Дата] — План дня

### Апдейт: вчера

| Метрика | Значение |
|---------|----------|
| Запланировано | X РП |
| Сделано | Y РП |
| Коммитов | Z |
| Время (оценка) | Wh |

**Что сделано вчера:**
- [x] РП-1: описание (2 коммита)
- [ ] РП-2: не завершено → carry-over

### Прогресс недели

День N/7 | РП: X/Y завершено | Бюджет: Zh/Wh

### План на сегодня

| # | РП | Бюджет | Приоритет |
|---|-----|--------|-----------|
| 1 | ... | 2h | P1 |
| 2 | ... | 1.5h | P2 |

**Итого:** 3.5h

### С чего начать

**Рекомендую начать с: РП-1**

Причина: [объяснение — например, "это блокер для РП-2" или "требует свежей головы"]

---

Хорошего продуктивного дня!
```

## Метрики успеха

| Метрика | Целевое |
|---------|---------|
| План создан | 100% рабочих дней |
| Апдейт о вчера | Включён |
| Рекомендация дана | Да |

## Ошибки и fallback

| Ошибка | Действие |
|--------|----------|
| Нет плана вчера | Пропустить апдейт, создать план |
| Нет недельного плана | Запросить у пользователя или взять из месячных |
| Нет коммитов вчера | Отметить "день без коммитов" |

## Связанные сценарии

- **Перед (Пн):** [01-strategy-session](01-strategy-session.md)
- **После:** [evening-review](../on-demand/01-evening-review.md) — вечерний итог
