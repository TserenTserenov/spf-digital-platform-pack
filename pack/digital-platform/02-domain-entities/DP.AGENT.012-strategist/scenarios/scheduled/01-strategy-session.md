---
id: AGT.012.SC.01
type: scenario
trigger: scheduled
schedule: "7:00 Monday"
status: draft
created: 2026-02-07
---

# Strategy Session

## Назначение

Еженедельная сессия стратегирования и планирования. Запускается автоматически в 7:00 каждый понедельник.

## Триггер

- **Время:** 7:00 по местному времени
- **День:** Понедельник
- **Тип:** Автоматический (cron/launchd)

## Входы

| Источник | Данные | Обязательность |
|----------|--------|----------------|
| `current/monthly-priorities.md` | Приоритеты на месяц | Обязательно |
| `current/weekly-plan.md` | План прошлой недели | Обязательно |
| `reviews/weekly/YYYY-WXX.md` | Ревью прошлой недели | Если есть |
| Git log | Коммиты за прошлую неделю | Обязательно |

## Алгоритм

### Шаг 1: Анализ прошлой недели

1. Загрузить план прошлой недели
2. **КРИТИЧЕСКИ ВАЖНО:** Загрузить коммиты за неделю из **ВСЕХ** репозиториев в `~/Github/`
3. Сопоставить РП и коммиты
4. Рассчитать completion rate

**Команда для сбора коммитов из всех репо:**
```bash
for repo in $(ls ~/Github/); do
  if [ -d ~/Github/$repo/.git ]; then
    commits=$(cd ~/Github/$repo && git log --oneline --since="1 week ago" 2>/dev/null | wc -l)
    if [ "$commits" -gt 0 ]; then
      echo "=== $repo ($commits) ==="
      cd ~/Github/$repo && git log --oneline --since="1 week ago"
    fi
  fi
done
```

**ЗАПРЕЩЕНО:** Проверять только репозитории из текущей сессии. Пользователь работает в нескольких сессиях параллельно.

```
completion_rate = done_wp / planned_wp * 100%
```

### Шаг 2: Сдвиг месячного окна

1. Загрузить месячные приоритеты
2. Убрать завершённые
3. Добавить новые (если есть от пользователя)
4. Сдвинуть окно на неделю вперёд

### Шаг 3: Формирование плана недели

1. Выбрать РП из месячных приоритетов
2. Распределить бюджет времени
3. Учесть carry-over (незавершённые РП)
4. Сформировать таблицу РП

### Шаг 4: Запрос к пользователю

Показать:
- Итоги прошлой недели (кратко)
- Предложение плана на неделю
- Запрос на корректировку месячных приоритетов

### Шаг 5: После подтверждения

1. Сохранить `current/weekly-plan.md`
2. Обновить `current/monthly-priorities.md`
3. Закоммитить изменения
4. Перейти к сценарию `day-plan`

## Выходы

| Артефакт | Путь | Описание |
|----------|------|----------|
| План недели | `current/weekly-plan.md` | Обновлённый план |
| Месячные приоритеты | `current/monthly-priorities.md` | Сдвинутое окно |
| Коммит | — | Фиксация изменений |

## Формат вывода

```markdown
## Strategy Session: [дата]

### Итоги прошлой недели

| Метрика | Значение |
|---------|----------|
| Запланировано | X РП (Yh) |
| Завершено | Z РП (Wh) |
| Completion rate | N% |

**Что сделано:**
- РП-1: done
- РП-2: done
- РП-3: carry-over → эта неделя

### План на неделю [даты]

| # | РП | Область | Репо | Бюджет |
|---|-----|---------|------|--------|
| 1 | ... | ... | ... | Xh |

**Итого:** Yh

### Месячные приоритеты (обновлённые)

1. Приоритет 1 — статус
2. Приоритет 2 — статус
...

---

Хотите внести изменения в план?
```

## Метрики успеха

| Метрика | Целевое |
|---------|---------|
| Сессия завершена | 100% понедельников |
| План недели создан | Да |
| Пользователь подтвердил | Да |

## Ошибки и fallback

| Ошибка | Действие |
|--------|----------|
| Нет плана прошлой недели | Создать с нуля из месячных приоритетов |
| Нет месячных приоритетов | Запросить у пользователя |
| Нет коммитов | Отметить как "без активности" |

## Связанные сценарии

- **После:** [02-day-plan](02-day-plan.md) — создание плана на понедельник
- **Зависит от:** [03-week-review](03-week-review.md) — использует ревью прошлой недели
