---
id: AGT.012.SC.03
type: scenario
trigger: scheduled
schedule: "22:00 Sunday"
status: draft
created: 2026-02-07
---

# Week Review

## Назначение

Подведение итогов недели с формированием отчёта для публикации в клубе. Запускается автоматически в 22:00 в воскресенье.

## Триггер

- **Время:** 22:00 по местному времени
- **День:** Воскресенье
- **Тип:** Автоматический (cron/launchd)

## Входы

| Источник | Данные | Обязательность |
|----------|--------|----------------|
| `current/weekly-plan.md` | План недели | Обязательно |
| `current/daily/*.md` | Планы дней | Все за неделю |
| Git log | Коммиты за неделю | Обязательно |
| `reviews/weekly/` | Прошлые ревью | Для сравнения |

## Алгоритм

### Шаг 1: Сбор данных

1. Загрузить недельный план
2. Загрузить все дневные планы
3. **КРИТИЧЕСКИ ВАЖНО:** Получить коммиты за неделю из **ВСЕХ** репозиториев в `~/Github/`
4. Сгруппировать коммиты по РП и репозиториям

**Команда для сбора коммитов из всех репо:**
```bash
for repo in $(ls ~/Github/); do
  if [ -d ~/Github/$repo/.git ]; then
    commits=$(cd ~/Github/$repo && git log --oneline --since="1 week ago" 2>/dev/null | wc -l)
    if [ "$commits" -gt 0 ]; then
      echo "=== $repo ($commits) ==="
      cd ~/Github/$repo && git log --oneline --since="1 week ago"
    fi
  fi
done
```

**ЗАПРЕЩЕНО:** Проверять только некоторые репозитории. Пользователь работает в нескольких сессиях параллельно.

### Шаг 2: Расчёт статистики

```
Статистика недели:
- Запланировано РП: X
- Завершено РП: Y
- Completion rate: Z%
- Всего коммитов: N
- Активных дней: M
- Репозиториев затронуто: K
```

### Шаг 3: Анализ по областям

Группировка по:
- Ядрам (A, B, C, 0.OPS)
- Репозиториям
- Типам работы

### Шаг 4: Инсайты

1. Сравнение с прошлой неделей
2. Тренды (рост/падение)
3. Блокеры и carry-over
4. Достижения

### Шаг 5: Формирование отчёта

Формат для публикации в клубе.

## Выходы

| Артефакт | Путь | Описание |
|----------|------|----------|
| Ревью недели | `reviews/weekly/YYYY-WXX.md` | Итоги для клуба |
| Коммит | — | Фиксация ревью |

## Формат вывода (для клуба)

```markdown
# Итоги недели [номер]: [даты]

## Ключевые результаты

- **Завершено:** X из Y РП (Z%)
- **Коммитов:** N
- **Активных дней:** M/7

## Что сделано

### [Область 1]
- РП-1: краткое описание результата
- РП-2: краткое описание результата

### [Область 2]
- РП-3: краткое описание результата

## Статистика

| Метрика | Эта неделя | Прошлая | Δ |
|---------|------------|---------|---|
| РП завершено | X | Y | +Z |
| Коммитов | N | M | +K |
| Completion rate | X% | Y% | +Z% |

## По репозиториям

| Репо | Коммитов | РП |
|------|----------|-----|
| ecosystem-development | X | Y |
| spf-digital-platform-pack | X | Y |
| ... | ... | ... |

## Инсайты

- **Хорошо:** что получилось
- **Улучшить:** что можно улучшить
- **Блокеры:** что мешало

## Следующая неделя

Фокус: [основной фокус из месячных приоритетов]

---

#weekly-review #[год]-W[номер]
```

## Метрики успеха

| Метрика | Целевое |
|---------|---------|
| Ревью создано | 100% недель |
| Опубликовано в клубе | Да |
| Статистика корректна | Да |

## Ошибки и fallback

| Ошибка | Действие |
|--------|----------|
| Нет недельного плана | Собрать из дневных планов |
| Нет дневных планов | Работать только с коммитами |
| Нет коммитов | Отметить "неделя без активности" |

## Связанные сценарии

- **Использует данные:** [02-day-plan](02-day-plan.md) — дневные планы
- **Используется в:** [01-strategy-session](01-strategy-session.md) — для анализа
